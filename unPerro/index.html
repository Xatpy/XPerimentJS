<html>
<head>
    <meta charset="UTF-8">
    <title>Un perroüê∂</title>
    <link rel="icon" href="./doge.png" type="image/png">

    <meta property="og:url" content="http://xatpy.github.io/XPerimentJS/unPerro/" />
    <meta property="og:site_name" content="Un perro." />
    <meta property="og:title" content="Un perro." />
    <meta property="og:description" content="Un perro." />
    <meta property="og:image" itemprop="image" content="https://raw.githubusercontent.com/Xatpy/XPerimentJS/gh-pages/unPerro/galgo.jpg" /> 

    <meta name="twitter:card" content="summary" />
    <meta name="twitter:site" content="@chapi13" />
    <meta name="twitter:title" content="Un perro." />
    <meta name="twitter:description" content="Un perro" />
    <meta name="twitter:image" content="https://raw.githubusercontent.com/Xatpy/XPerimentJS/gh-pages/unPerro/galgo.jpg" />
    <meta name="twitter:image:alt" content="A dog" />

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
    <script src="https://code.createjs.com/createjs-2015.11.26.min.js"></script>
    <link rel="stylesheet" type="text/css" href="Style.css"/>
    <script type="text/javascript">

    var keyword = "dog, animal, pet";
    var time = 2150;
    var unPerroMP3 = "https://raw.githubusercontent.com/Xatpy/SoundsTable/master/LaVidaModerna/unPerro.mp3";

    function unPerro()
    {
        $.getJSON("http://api.flickr.com/services/feeds/photos_public.gne?jsoncallback=?",
        {
            tags: keyword,
            tagmode: "all",
            format: "json"
        },
        function(data) {
            var rnd = Math.floor(Math.random() * data.items.length);

            var image_src = data.items[rnd]['media']['m'].replace("_m", "_b");

            $('body').css('background-color', "black");
            $('body').css('background-image', "url('" + image_src + "')");
            $('body').css('background-repeat', "no-repeat");
            $('body').css('background-position', "center");
            $('body').css('background-attachment', "fixed");

            playSound();
        });
    }

    function playSound() {
        createjs.Sound.play("sound");
    }

    window.onload = function() {
        createjs.Sound.registerSound(unPerroMP3, "sound");
        unPerro();
        window.setInterval(function(){
            unPerro();
        }, time);
    };
   


    /* GA ANALYTICS */
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-99743151-1', 'auto');
    ga('send', 'pageview');

    </script>

</head>
<body>
</body>
</html>